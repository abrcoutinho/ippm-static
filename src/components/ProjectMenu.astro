---
---
<ul class="project-menu">
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-projetos"
			title="Projeto">
			<i></i><u>Projeto</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-comunicacao"
			title="Comunicação">
			<i></i><u>Comunicação</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-escopo"
			title="Escopo">
			<i></i><u>Escopo</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-cronograma"
			title="Cronograma">
			<i></i><u>Cronograma</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-recursos"
			title="Recursos">
			<i></i><u>Recursos</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-riscos-problemas"
			title="Riscos e Problemas">
			<i></i><u>Riscos e Problemas</u><span></span>
		</button>
	</li>
	<li>
		<button
			class="project-menu-item"
			data-sub="sub-bibliotecas"
			title="Bibliotecas">
			<i></i><u>Bibliotecas</u><span></span>
		</button>
	</li>
</ul>

<!-- Submenus -->
<ul class="project-menu-sub" id="sub-projetos">
	<li><a href={`${import.meta.env.BASE_URL}projeto-1-resumo`} title="Resumo do Projeto"><i></i><u>Resumo do Projeto</u></a></li>
	<li><a href="#" title="Informações do Projeto"><i></i><u>Informações do Projeto</u></a></li>
	<li><a href="#" title="Objetivos"><i></i><u>Objetivos</u></a></li>
	<li><a href="#" title="Lições Aprendidas"><i></i><u>Lições Aprendidas</u></a></li>
	<li><a href="#" title="Termo de Abertura"><i></i><u>Termo de Abertura</u></a></li>
	<li><a href="#" title="Plano do Projeto"><i></i><u>Plano do Projeto</u></a></li>
	<li><a href="#" title="Termo de Encerramento"><i></i><u>Termo de Encerramento</u></a></li>
	<li><a href="#" title="Variações"><i></i><u>Variações</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-comunicacao">
	<li><a href="#" title="Partes Interessadas"><i></i><u>Partes Interessadas</u></a></li>
	<li><a href="#" title="Calendários"><i></i><u>Calendários</u></a></li>
	<li><a href="#" title="Relatórios de Situação"><i></i><u>Relatórios de Situação</u></a></li>
	<li><a href="#" title="Resumos Executivos"><i></i><u>Resumos Executivos</u></a></li>
	<li><a href="#" title="Atas de Reunião"><i></i><u>Atas de Reunião</u></a></li>
	<li><a href="#" title="Pesquisa de Satisfação"><i></i><u>Pesquisa de Satisfação</u></a></li>
	<li><a href="#" title="Relatórios Diários de Obra"><i></i><u>Partes Interessadas</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-escopo">
	<li><a href="#" title="EAP"><i></i><u>EAP</u></a></li>
	<li><a href="#" title="Requisitos"><i></i><u>Requisitos</u></a></li>
	<li><a href="#" title="Entregas"><i></i><u>Entregas</u></a></li>
	<li><a href="#" title="Análise de Escopo Agregado"><i></i><u>Análise de Escopo Agregado</u></a></li>
	<li><a href="#" title="Mudanças"><i></i><u>Mudanças</u></a></li>
	<li><a href="#" title="Inspeções de Qualidade"><i></i><u>Inspeções de Qualidade</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-cronograma">
	<li><a href="#" title="Cronograma"><i></i><u>Cronograma</u></a></li>
	<li><a href="#" title="Cronograma de Marcos"><i></i><u>Cronograma de Marcos</u></a></li>
	<li><a href="#" title="Tarefas do Período"><i></i><u>Tarefas do Período</u></a></li>
	<li><a href="#" title="Atividades (to-do)"><i></i><u>Atividades (to-do)</u></a></li>
	<li><a href="#" title="Datas Limites"><i></i><u>Datas Limites</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-recursos">
	<li><a href="#" title="Recursos do Projeto"><i></i><u>Recursos do Projeto</u></a></li>
	<li><a href="#" title="Mapa de Alocação"><i></i><u>Mapa de Alocação</u></a></li>
	<li><a href="#" title="Contratos"><i></i><u>Contratos</u></a></li>
	<li><a href="#" title="Aquisições"><i></i><u>Aquisições</u></a></li>
	<li><a href="#" title="Atribuições de Trabalho"><i></i><u>Atribuições de Trabalho</u></a></li>
	<li><a href="#" title="Materiais"><i></i><u>Materiais</u></a></li>
	<li><a href="#" title="Custos do Project"><i></i><u>Custos do Project</u></a></li>
	<li><a href="#" title="Curva S"><i></i><u>Curva S</u></a></li>
	<li><a href="#" title="Gestão de Custos IPPM"><i></i><u>Gestão de Custos IPPM</u></a></li>
	<li><a href="#" title="Análise de Gestão de Custos IPPM"><i></i><u>Análise de Gestão de Custos IPPM</u></a></li>
	<li><a href="#" title="Medições"><i></i><u>Medições</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-riscos-problemas">
	<li><a href={`${import.meta.env.BASE_URL}projeto-1-riscos`} title="Riscos"><i></i><u>Riscos</u></a></li>
	<li><a href="#" title="Problemas"><i></i><u>Problemas</u></a></li>
</ul>

<ul class="project-menu-sub" id="sub-bibliotecas">
	<li><a href="#" title="Multimidias"><i></i><u>Multimidias</u></a></li>
	<li><a href="#" title="Documentos"><i></i><u>Documentos</u></a></li>
</ul>


<script>

// Submenus
document.addEventListener("click", function (event) {
  const button = event.target.closest(".project-menu-item");

  if (button) {
    event.stopPropagation();

    const submenuId = button.dataset.sub;
    if (!submenuId) return;

    const submenu = document.getElementById(submenuId);
    if (!submenu) return;

    // fecha outros
    document.querySelectorAll(".project-menu-sub").forEach(sm => {
      if (sm !== submenu) sm.style.display = "none";
    });

    // toggle
    if (submenu.style.display === "block") {
      submenu.style.display = "none";
      return;
    }

    // abre para medir
    submenu.style.display = "block";
    submenu.style.visibility = "hidden";

    const submenuRect = submenu.getBoundingClientRect();

    let left = event.clientX;
    let top = event.clientY;

    // evita sair pela direita
    if (left + submenuRect.width > window.innerWidth) {
      left = window.innerWidth - submenuRect.width - 8;
    }

    // evita sair por baixo
    if (top + submenuRect.height > window.innerHeight) {
      top = window.innerHeight - submenuRect.height - 8;
    }

    submenu.style.left = `${left + window.scrollX}px`;
    submenu.style.top = `${top + window.scrollY}px`;
    submenu.style.visibility = "visible";

    return;
  }

  // clicou fora
  document.querySelectorAll(".project-menu-sub").forEach(sm => {
    sm.style.display = "none";
  });
});

// impede fechamento ao clicar no submenu
document.querySelectorAll(".project-menu-sub").forEach(submenu => {
  submenu.addEventListener("click", e => e.stopPropagation());
});

// ---

// menu drag to scroll
const container = document.querySelector('.project-menu');

let isDown = false;
let startX;
let scrollLeft;

container.addEventListener('mousedown', (e) => {
  isDown = true;
  container.classList.add('active');
  startX = e.pageX - container.offsetLeft;
  scrollLeft = container.scrollLeft;
});

container.addEventListener('mouseleave', () => {
  isDown = false;
});

container.addEventListener('mouseup', () => {
  isDown = false;
});

container.addEventListener('mousemove', (e) => {
  if (!isDown) return;
  e.preventDefault();
  const x = e.pageX - container.offsetLeft;
  const walk = (x - startX) * 1.5; // velocidade do scroll
  container.scrollLeft = scrollLeft - walk;
});

</script>